let planetRepository=function(){let t=[],e="https://swapi.dev/api/planets/",n,a=window.$;function o(t){console.log("Showing modal for:",t.name);let e=a(".modal-body"),n=a(".modal-title");n.empty(),e.empty();let o=a("<h1>"+t.name+"</h1>"),r=a('<p><strong>Climate: </strong><span class="modal-element">'+t.climate+"</span></p>"),l=a('<p><strong>Diameter: </strong><span class="modal-element">'+t.diameter+"</span></p>"),i=a('<p><strong>Gravity: </strong><span class="modal-element">'+t.gravity+"</span></p>"),s=a('<p><strong>Population: </strong><span class="modal-element">'+t.population+"</span></p>"),p=a('<p><strong>Terrain: </strong><span class="modal-element">'+t.terrain+"</span></p>"),c=a('<p><strong>Residents: </strong><span class="modal-element">'+t.residents.join(", ")+"</span></p>");n.append(o),e.append(r),e.append(l),e.append(i),e.append(s),e.append(p),e.append(c)}function r(e){"object"==typeof e&&"name"in e&&"string"==typeof e.name?t.push(e):console.log("planet is not correct")}function l(){return t}function i(t){planetRepository.loadDetails(t).then(function(){o(t)})}function s(){let t=document.getElementById("search-input").value.toLowerCase();document.querySelectorAll(".list-group-item").forEach(function(e){e.querySelector(".button-class").innerText.toLowerCase().includes(t)?e.style.display="block":e.style.display="none"})}return document.querySelector(".navbar-brand").addEventListener("click",function(){location.reload()}),a(document).ready(function(){a(".navbar-brand, .display-5").click(function(){location.reload()})}),document.getElementById("search-input").addEventListener("input",function(){s()}),{add:r,getAll:l,addListItem:function t(e){let n=document.querySelector(".list-group"),a=document.createElement("li"),o=document.createElement("button");o.innerText=e.name,o.classList.add("button-class"),o.classList.add("btn-primary"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#planet-modal"),a.classList.add("list-group-item"),a.appendChild(o),n.appendChild(a),o.addEventListener("click",function(){i(e)})},loadList:function t(){let a,o;return a=document.querySelector(".planet-list"),o=document.createElement("p"),a.appendChild(o),fetch(e).then(function(t){return t.json()}).then(function(t){n=Math.ceil(t.count/10);let a=[];for(let o=1;o<=n;o++)a.push(fetch(e+`?page=${o}`).then(t=>t.json()).then(t=>t.results));return Promise.all(a)}).then(function(t){t.forEach(function(t){t.forEach(function(t){r({name:t.name,climate:t.climate,diameter:t.diameter,gravity:t.gravity,population:t.population,terrain:t.terrain,detailsUrl:t.url,residents:t.residents})})});document.querySelector(".planet-list").innerHTML=""}).catch(function(t){console.error(t)})},loadDetails:function t(e){return fetch(e.detailsUrl).then(function(t){return t.json()}).then(function(t){return e.climate=t.climate,e.diameter=t.diameter,e.gravity=t.gravity,e.population=t.population,e.terrain=t.terrain,Promise.all(t.residents.map(t=>fetch(t).then(t=>t.json())))}).then(function(t){e.residents=t.map(t=>t.name)}).catch(function(t){console.error("Error fetching data:",t)})},showDetails:i,showModal:o,searchPlanet:s}}();planetRepository.loadList().then(function(){planetRepository.getAll().forEach(function(t){planetRepository.addListItem(t)});document.querySelector(".loading-container").style.display="none"});